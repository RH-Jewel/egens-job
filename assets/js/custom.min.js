jQuery(".jobTitleIcon,.jobTitle").on("click", function () {
    jQuery(".jobTitleAccordion").toggleClass("accordion--expanded"), jQuery(this).parent("div").toggleClass("expanded")
}), jQuery(".jobCityIcon,.jobCity").on("click", function () {
    jQuery(".jobCityAccordion").toggleClass("accordion--expanded"), jQuery(this).parent("div").toggleClass("expanded")
}), jQuery(".jobPositionTypeIcon,.jobPositionType").on("click", function () {
    jQuery(".jobPositionTypeAccordion").toggleClass("accordion--expanded"), jQuery(this).parent("div").toggleClass("expanded")
}), jQuery(".jobPositionIcon,.jobPosition").on("click", function () {
    jQuery(".jobPositionAccordion").toggleClass("accordion--expanded"), jQuery(this).parent("div").toggleClass("expanded")
});
var jobInfo = {
    filterTitleList: [],
    filterCityList: [],
    filterPositionTypeList: [],
    filterPositionList: [],
    jobSearchKeyword: "",
    pageURL: egens_frontend_ajax_handler_params.page_url
};

function getJobByPagination(o, t) {
    jQuery.ajax({
        url: egens_frontend_ajax_handler_params.ajaxurl,
        data: {
            action: "get_job_by_pagination",
            page_number: o
        },
        type: "POST",
        beforeSend: function () {
            jQuery(".js-jobs-container").addClass("container-loader is-loading")
        },
        success: function (o) {
            jQuery("#jobArchiveList").empty().html(o), jQuery(".job_paginate").each(function () {
                jQuery(this).removeClass("current")
            }), t.addClass("current"), jQuery(".js-jobs-container").removeClass("container-loader is-loading")
        }
    })
}

function filterJobAjaxHandler() {
    jQuery.ajax({
        url: egens_frontend_ajax_handler_params.ajaxurl,
        data: {
            action: "get_job_by_filter_title_list",
            jobInfo: jobInfo
        },
        type: "POST",
        beforeSend: function () {
            jQuery(".js-jobs-container").addClass("container-loader is-loading")
        },
        success: function (o) {
            jQuery("#jobArchiveList").empty().html(o), jQuery(".js-jobs-container").removeClass("container-loader is-loading"), jQuery("#jobPostPagination").css("display", "none")
        }
    })
}
jQuery(".jobTitleInput").on("click", function () {
    var o = jQuery(this).val();
    if (jobInfo.filterTitleList.includes(o)) {
        var t = jobInfo.filterTitleList.filter(o => o !== jQuery(this).val());
        jobInfo.filterTitleList = t, filterJobAjaxHandler()
    } else jobInfo.filterTitleList.push(o), filterJobAjaxHandler()
}), jQuery("#jobSearchForm").submit(function (o) {
    o.preventDefault();
    var t = jQuery(".job_search_value").val();
    jobInfo.jobSearchKeyword = t, filterJobAjaxHandler(), console.log(jobInfo)
}), jQuery(".jobCityInput").on("click", function () {
    var o = jQuery(this).val();
    if (jobInfo.filterCityList.includes(o)) {
        var t = jobInfo.filterCityList.filter(o => o !== jQuery(this).val());
        jobInfo.filterCityList = t, filterJobAjaxHandler()
    } else jobInfo.filterCityList.push(o), filterJobAjaxHandler()
}), jQuery(".jobPositionTypeInput").on("click", function () {
    var o = jQuery(this).val();
    if (jobInfo.filterPositionTypeList.includes(o)) {
        var t = jobInfo.filterPositionTypeList.filter(o => o !== jQuery(this).val());
        jobInfo.filterPositionTypeList = t, filterJobAjaxHandler()
    } else jobInfo.filterPositionTypeList.push(o), filterJobAjaxHandler()
}), jQuery(".jobPositionInput").on("click", function () {
    var o = jQuery(this).val();
    if (jobInfo.filterPositionList.includes(o)) {
        var t = jobInfo.filterPositionList.filter(o => o !== jQuery(this).val());
        jobInfo.filterPositionList = t, filterJobAjaxHandler()
    } else jobInfo.filterPositionList.push(o), filterJobAjaxHandler()
}), jQuery(".job_paginate").on("click", function (o) {
    o.preventDefault(), getJobByPagination(jQuery(this).text(), jQuery(this)), jQuery("html, body").animate({
        scrollTop: jQuery("#mainJobArchive").offset().top
    })
});
let saveJobIdArray = [];
jQuery("body").on("click", ".save__jobs", function () {
    jQuery(this).toggleClass("is-saved");
    var o = jQuery(this).attr("data-save-job-id");
    saveJobIdArray.includes(o) ? saveJobIdArray = saveJobIdArray.filter(t => t !== o) : saveJobIdArray.push(o);
    var t = {
            action: "save_jobs",
            page_url: jobInfo.pageURL,
            job_id_array: saveJobIdArray
        },
        e = saveJobIdArray.length;
    jQuery(".circle-indicator-count").text(e), sessionStorage.setItem("modalLikeContentCount", e), jQuery.ajax({
        url: egens_frontend_ajax_handler_params.ajaxurl,
        data: t,
        type: "POST",
        beforeSend: function () {
            jQuery(".modalLike .circle-loader").css("display", "block"), jQuery(".modalLike .panel-column-content.is-visible").css("opacity", "0.4")
        },
        success: function (o) {
            jQuery("#modalLikeContent").empty().html(o), sessionStorage.setItem("modalLikeContent", o), jQuery(".modalLike .circle-loader").css("display", "none"), jQuery(".modalLike .panel-column-content.is-visible").css("opacity", "1")
        }
    })
}), jQuery("body").on("click", ".js-remove-job", function () {
    var o = jQuery(this).attr("data-save-job-id");
    (jQuery(".save__jobs").attr("data-save-job-id"), jQuery(".save__jobs[data-save-job-id='" + o + "']").removeClass("is-saved"), saveJobIdArray.includes(o)) ? saveJobIdArray = saveJobIdArray.filter(t => t !== o): saveJobIdArray.push(o);
    var t = {
            action: "save_jobs",
            job_id_array: saveJobIdArray
        },
        e = saveJobIdArray.length;
    jQuery(".circle-indicator-count").text(e), sessionStorage.setItem("modalLikeContentCount", e), jQuery.ajax({
        url: egens_frontend_ajax_handler_params.ajaxurl,
        data: t,
        type: "POST",
        beforeSend: function () {
            jQuery(".modalLike .circle-loader").css("display", "block"), jQuery(".modalLike .panel-column-content.is-visible").css("opacity", "0.4")
        },
        success: function (o) {
            jQuery("#modalLikeContent").empty().html(o), sessionStorage.setItem("modalLikeContent", o), jQuery(".modalLike .circle-loader").css("display", "none"), jQuery(".modalLike .panel-column-content.is-visible").css("opacity", "1")
        }
    })
});
var modalLikeContent = sessionStorage.getItem("modalLikeContent"),
    modalLikeContentCount = sessionStorage.getItem("modalLikeContentCount");
modalLikeContent && jQuery("#modalLikeContent").empty().html(modalLikeContent), modalLikeContentCount && jQuery(".circle-indicator-count").text(modalLikeContentCount), jQuery(window).on("load", function () {
    jQuery(".pagination > .job_paginate:first").addClass("current")
});